\chapter{取り扱う問題とプロンプトに関する説明}

\section{ヒントの定義}
実用日本語表現辞典によると\footnote{\url{http://www.practical-japanese.com/}},
"hint"とは,直接的でない示唆や助言を意味する英単語である.何かを暗に示すことや,
他人に対して分かりやすくない形で情報を提供することを指す.また,解決策やアイデアの手がかりとなる情報も
「hint」として捉えられる.
よって,本研究で求めるヒントは正答プログラムを明示するのではなく,誤答プログラムの修正箇所・方法を
推測できるようにして正答に導かせるものとする.


\section{取り扱う問題,正答,誤答について}
本研究で取り扱う問題は,競技プログラミングサイトAtCoderの典型問題を集め,
問題を解く実力を付けるために作られた「競プロ典型90問」[2]の問題とする．
この問題の星２すべてを対象とする.
理由として,予備実験と題して星2,3,4の問題を検証を行った結果,
星3,星4では問題の難易度が高いことに加え,正答・誤答のコードが長く比較対象が多い.
これにより,的外れなヒントを提案することが多かった.
それに対して,星2では問題の難易度が程よく,正答・誤答のコードも比較的簡潔であったため,
適切なヒントを行うケースの程よく確認できた.
この結果から星2を対象に修正ヒントの提案手法の可能性を検討する.\\
加えて,競プロ典型90問の回答データは正誤どちらも記録され,公開されており,それを利用してよい.
したがって解答データを利用する.
また,取り扱う正答,誤答について,解答者が同じもので,正解に到達する前の誤答を使用する.
理由として,同じ解答者であれば,プログラムの差分が少なくなるため,
ChatGPTがいいヒントを提案する可能性が高くなると考えた.
したがって,正答に到達する以前の誤答は使うべきであると判断した.


\section{取り扱う言語}
本研究ではPythonを用いる.
理由として,シンプルかつ短いコードで記述できることから,エラー箇所が分かりやすい.
それに加えコードが短いため,ChatGPTがプログラムを提供しやすい

\section{プロンプトについて}
本研究では自動化することを目的に検証を行ったため,プロンプトの形式を統一してヒント提案を行った.
プロンプトの形式について文献[3][4]に示される次の手法を考慮した．\\
・プロンプトを書くコツ２[3]\\
これはプロンプトの最初に指示を置くことで期待する出力が得らるようにする.\\
・プロンプトを書くコツ３[3]\\
具体的かつできるだけ詳細にプロンプトに含めることで,より精度の高い回答結果が得られるようにする.\\
・プロンプトを書くコツ７[3]\\
してはいけないことではなく,何をすべきかを具体的にプロンプトに含めることで精度を向上させる.\\
・高精度汎用プロンプト実行例[4]\\
あなたは,プロの【その分野の専門家】です.と最初の一文に加えることで,回答精度を向上させる.\\

このプロンプトに対して一度の質問で与えるものが多くうまくヒント提案できないのではないかと考え,
入力パターン2を作成した.また,実験を進めるうえで入力パターン1,2共に期待されない結果を出力した.
このとき,正答がヒントに影響を与えていることが考えられたため,それの対処法として入力パターン3を用意した.
そのため以下の3パターンをプロンプトとしている.\\


\subsection{入力パターン1:要件定義を一気に与える}
この入力パターンは,プロンプトを書くコツ2[3],を考慮し,最初に指示を置いた.
次に,プロンプトを書くコツ3[3]を考慮しできるだけ具体的に指示するよう文章を作成した.
次に,高精度汎用プロンプトプロンプト実行例[4]を考慮し最初に専門家であることを伝えることが効果的であると考えた.
そのため,最初の一文に「あなたは優秀なプログラマーです」を追加した.
最後に,プロンプトを書くこと7[3]を考慮し「正答について言及しないでください」という一文を追加した.
これは,ChatGPTが正答を明らかにすることが多かったため,できるだけ正答を言わせないための工夫である.\\
以上の考えから作成したプロンプトが以下である.

\begin{screen}
あなたは優秀なプログラマーです。\\
今から以下の問題を考えます。\\
問題文と正答から誤答のプログラムを修正するヒントを提案して下さい。\\
プログラムなしでおねがいします。\\
正答について言及しないでください。\\

\textbf{問題文}\\

\textbf{正答}\\

\textbf{誤答}
\end{screen}


\subsection{入力パターン2:入力パターン１を段階的に質問する}
この入力パターンでは入力パターン1を数回に分けて行うものである.
これにより,一度に与える情報量を減らすことでChatGPTがより良い回答を返す場合があることがわかっているので,
ヒントについてもより良いヒントが提案できるのではないかと考えた.\\
内容は以下である.
\begin{screen}
\textbf{会話1}\\
あなたは優秀なプログラマーです。\\
今から以下の問題を考えます。\\

問題文
\end{screen}

\begin{screen}
\textbf{会話2}\\
次に正解のプログラムを示します。理解してください。\\

正答プログラム 
\end{screen}

\begin{screen}
\textbf{会話3}\\
次に誤答のプログラムを示します。\\
問題文と正解のプログラムから誤答のプログラムを修正箇所または修正方法を提案して下さい。\\
プログラムなしでおねがいします。\\
正答について言及しないでください。\\
   
誤答プログラム
\end{screen}

\subsection{入力パターン3:正答を与えずヒント提案をさせる}
この入力パターンは,入力パターン1,2がうまくいかなかった場合の対処法として考慮した.\\
入力パターン2から正答のプログラムを排除したものになっている.
これにより,問題文から誤答プログラムの問題点を指摘する可能性を模索した.\\
% この程度の質問であれば自動化も検討できるはずだ.
内容は以下である.

\begin{screen}
あなたは優秀なプログラマーです。\\
今から以下の問題を考えます。\\
問題文から誤答のプログラムを修正するヒントを提案して下さい。\\
プログラムなしでおねがいします。\\
正答について言及しないでください。\\
    
問題文\\

誤答
\end{screen}